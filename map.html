<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Map of Palestine – Returning to Haifa</title>

  <!-- Short description used by search engines and previews -->
  <meta name="description" content="Interactive map of historical Palestine under Zionist occupation: cities, camps, massacres, and resistance." />

  <!-- Reuse same basic styling language as index.html -->
  <style>
    :root{
      --bg:#0b0b0b;
      --panel:#0f0f10;
      --muted:#cfcfcf;
      --text:#f4f4f4;
      --border:#222;
      --accent:#e53935;
      --max-width:900px;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height:1.6;
    }

    header {
      padding: 2.5rem 1.5rem 1rem;
      border-bottom: 1px solid var(--border);
      background: var(--panel);
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 1rem;
    }

    h1 {
      margin: 0 0 0.3rem 0;
      font-size: clamp(1.6rem, 2.2vw + 1rem, 2.2rem);
      line-height:1.05;
      letter-spacing: -0.01em;
    }

    .tagline {
      color: var(--muted);
      font-size: 0.95rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      margin-top: 0.3rem;
    }

    /* simple back nav */
    nav a {
      color: var(--accent);
      font-size: 0.95rem;
      text-decoration: none;
      margin-right: 1rem;
    }
    nav a:hover {
      text-decoration: underline;
    }

    main {
      padding: 1.5rem 0 2rem;
    }

    .intro {
      font-size: 0.95rem;
      color: var(--muted);
      margin-bottom: 1rem;
    }

    /* Map container: Leaflet transforms this div into an interactive map */
    #map {
      width: 100%;
      height: 500px;                 /* adjust later if you want more/less height */
      border-radius: 10px;
      border: 1px solid var(--border);
      overflow: hidden;
    }

    footer {
      border-top: 1px solid var(--border);
      padding: 1.25rem 0;
      color: var(--muted);
      font-size: 0.9rem;
      background: var(--panel);
      margin-top: 2rem;
    }

    /* Optional: slightly mute the base map (so our overlays stand out more) */
    .leaflet-container {
      filter: saturate(0.7); /* reduce color intensity a bit */
    }
  </style>

  <!-- Leaflet CSS (map UI styles) from official CDN -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
</head>

<body>

  <header>
    <div class="container">
      <h1>Map of Palestine</h1>
      <div class="tagline">Historical Palestine as a land – not as the occupier names it.</div>
      <nav>
        <!-- Back to your main pages -->
        <a href="index.html">← Home</a>
        <a href="timeline.html">Timeline</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="container">
      <p class="intro">
        This map is not neutral. The base layer is just geography (roads, hills, sea).
        The names, borders, and descriptions we put on top follow Palestine as a colonized land:
        al-Quds, Haifa, Gaza, Yafa, and the villages and camps targeted by war, siege, and massacres.
        Later, this can grow into a time-based map of specific years, wars on Gaza, and the Nakba.
      </p>

      <!-- Leaflet will render the map into this element -->
      <div id="map"></div>
    </div>
  </main>

  <footer>
    <div class="container">
      © Returning to Haifa. The background map is just terrain; the story belongs to Palestine.
    </div>
  </footer>

  <!-- Leaflet JS (map logic) -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script>
    // =========
    // BASIC MAP SETUP – LOCKED TO HISTORICAL PALESTINE
    // =========

    // We define an approximate bounding box for historical Palestine.
    // These numbers are lat/lng pairs:
    //   [south latitude, west longitude], [north latitude, east longitude]
    //
    // It's not a legal border definition – it's a visual frame:
    // coast from Rafah up to north, then inland roughly along the Jordan valley.
    const PALESTINE_BOUNDS = L.latLngBounds(
      [29.5, 34.2],  // south-west (near Sinai / Naqab edge)
      [33.6, 36.1]   // north-east (upper Galilee / Jordan valley area)
    );

    // Create the map, lock it to PALESTINE_BOUNDS, and fit the view inside it.
    const map = L.map('map', {
      minZoom: 6,               // don't zoom out too far (prevents "whole world" view)
      maxZoom: 14,              // you can increase if you want closer zoom
      maxBounds: PALESTINE_BOUNDS,    // prevent panning far away
      maxBoundsViscosity: 1.0   // strong "rubber band" effect at edges
    }).fitBounds(PALESTINE_BOUNDS);

    // Base tiles: we still need a tile source for land/roads/sea.
    // For now we use OpenStreetMap because it's free and open.
    // We treat it as a neutral *background*, not as a political authority.
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // =========
    // PALESTINE OUTLINE (SYMBOLIC)
    // =========
    //
    // We draw a simple polygon outline on top to visually mark historical Palestine.
    // This is an approximate shape – a visual reminder that the land is one whole.
    const palestineOutlineCoords = [
      [33.1, 35.1],  // north-west coast
      [33.4, 35.8],  // north-east highlands
      [32.7, 35.8],
      [31.9, 35.6],
      [31.3, 35.4],
      [30.8, 35.1],
      [29.8, 34.9],
      [31.2, 34.25]  // near Gaza / Rafah
    ];

    L.polygon(palestineOutlineCoords, {
      color: '#e53935',      // red outline
      weight: 2,
      fillColor: '#e53935',
      fillOpacity: 0.04      // very soft fill, so base map is still visible
    }).addTo(map);

    // =========
    // EVENT / CITY MARKERS WITH OUR NAMES & TEXT
    // =========

    // Helper: create a marker with title + HTML description.
    function addEventMarker(lat, lng, title, htmlDescription) {
      const marker = L.marker([lat, lng]).addTo(map);
      marker.bindPopup(`
        <strong>${title}</strong><br />
        ${htmlDescription}
      `);
      return marker;
    }

    // We can later move this into a "data array" like we did for the quiz,
    // and filter by year / event type. For now we hardcode a few key locations.

    // al-Quds / Jerusalem
    addEventMarker(
      31.778, 35.23,
      "al-Quds (Jerusalem)",
      `
        The heart of Palestine, targeted by ongoing Judaization, settlement expansion,
        and attempts to erase its Arab and Islamic identity. Palestinians here face home
        demolitions, residency revocations, and daily harassment.
      `
    );

    // Gaza Strip
    addEventMarker(
      31.5, 34.47,
      "Gaza – besieged strip",
      `
        One of the most densely populated areas on earth, trapped under land, sea, and air blockade.
        Subjected to repeated large-scale bombardments and massacres, while its people continue to resist,
        organize, and insist on return.
      `
    );

    // Haifa
    addEventMarker(
      32.82, 34.99,
      "Haifa – a coastal Palestinian city",
      `
        A major Palestinian port city on the Mediterranean. Large parts of its indigenous population
        were expelled during the Nakba, yet Palestinians who remained continue to live under discrimination
        inside the 1948 occupied areas.
      `
    );

    // Yafa / Jaffa
    addEventMarker(
      32.05, 34.75,
      "Yafa (Jaffa)",
      `
        Once called the "Bride of the Sea", Yafa was a vibrant Palestinian coastal city.
        Its population was largely expelled in 1948; the city was later absorbed into the occupation’s coastal metropolis.
      `
    );

    // Deir Yassin (Nakba massacre site)
    addEventMarker(
      31.778, 35.177,
      "Deir Yassin – 1948 massacre",
      `
        In April 1948, Zionist militias attacked the Palestinian village of Deir Yassin near al-Quds,
        killing and expelling civilians as part of the wider ethnic cleansing campaign of the Nakba.
      `
    );

    // Jenin camp
    addEventMarker(
      32.463, 35.293,
      "Jenin camp",
      `
        Jenin refugee camp in the West Bank has faced repeated raids, demolitions,
        and killings by occupation forces, especially during the Second Intifada and recent assaults.
      `
    );

    // Later:
    //  - move these markers into a structured array:
    //      { lat, lng, title, text, year, type: "massacre" | "city" | "camp" | ... }
    //  - add UI controls (buttons or a slider) to show/hide markers based on year/type.
    //  - maybe connect this with your timeline page so clicking a period there could highlight events here.
  </script>

</body>
</html>
