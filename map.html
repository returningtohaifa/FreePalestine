<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Map of Palestine – Returning to Haifa</title>

  <!-- Description for search/preview -->
  <meta name="description" content="Stylized, Palestine-only interactive map: cities, camps, massacres, and resistance under Zionist occupation." />

  <!-- Reuse the same visual language as index.html -->
  <style>
    :root{
      --bg:#0b0b0b;
      --panel:#0f0f10;
      --muted:#cfcfcf;
      --text:#f4f4f4;
      --border:#222;
      --accent:#e53935;
      --max-width:900px;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height:1.6;
    }

    header {
      padding: 2.5rem 1.5rem 1rem;
      border-bottom: 1px solid var(--border);
      background: var(--panel);
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 1rem;
    }

    h1 {
      margin: 0 0 0.3rem 0;
      font-size: clamp(1.6rem, 2.2vw + 1rem, 2.2rem);
      line-height:1.05;
      letter-spacing: -0.01em;
    }

    .tagline {
      color: var(--muted);
      font-size: 0.95rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      margin-top: 0.3rem;
    }

    nav a {
      color: var(--accent);
      font-size: 0.95rem;
      text-decoration: none;
      margin-right: 1rem;
    }
    nav a:hover {
      text-decoration: underline;
    }

    main {
      padding: 1.5rem 0 2rem;
    }

    .intro {
      font-size: 0.95rem;
      color: var(--muted);
      margin-bottom: 1rem;
    }

    /* Map container – Leaflet will render into this */
    #map {
      width: 100%;
      height: 520px;
      border-radius: 10px;
      border: 1px solid var(--border);
      overflow: hidden;
    }

    footer {
      border-top: 1px solid var(--border);
      padding: 1.25rem 0;
      color: var(--muted);
      font-size: 0.9rem;
      background: var(--panel);
      margin-top: 2rem;
    }

    /* Make the map background dark and neutral.
       No base tiles = no colonial labels, only our overlays. */
    .leaflet-container {
      background: #050505;
    }
  </style>

  <!-- Leaflet CSS (map UI controls, markers, etc.) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
</head>

<body>

  <header>
    <div class="container">
      <h1>Map of Palestine</h1>
      <div class="tagline">Only Palestine. No occupier borders. No “neutral” erasure.</div>
      <nav>
        <a href="index.html">← Home</a>
        <a href="timeline.html">Timeline</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="container">
      <p class="intro">
        This is a stylized, Palestine-only map. The background is deliberately empty:
        no foreign state labels, no Hebrew naming imposed from above.
        What you see are Palestinian cities, camps, and sites of massacre and siege.
        Later, this can be tied to specific years and wars.
      </p>

      <div id="map"></div>
    </div>
  </main>

  <footer>
    <div class="container">
      © Returning to Haifa. The land is Palestine; the lines of the occupier are not our reference.
    </div>
  </footer>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script>
    // =========
    // 1. DEFINE PALESTINE-ONLY VIEW (NO WORLD SCROLLING)
    // =========

    // This bounding box roughly covers historical Palestine.
    // We use it to:
    //  - fit the initial view
    //  - prevent panning far outside (so it's *only* Palestine)
    const PALESTINE_BOUNDS = L.latLngBounds(
      [29.5, 34.2],  // south-west corner (Naqab / Sinai edge)
      [33.6, 36.1]   // north-east corner (upper Galilee / Jordan valley)
    );

    // Create the map with no tile layer (no base map).
    // Leaflet will show just a dark background (we set in CSS).
    const map = L.map('map', {
      minZoom: 6,
      maxZoom: 11,             // you can tune this if you want to zoom closer
      maxBounds: PALESTINE_BOUNDS,
      maxBoundsViscosity: 1.0  // "rubber band" at edge so you can't drag out far
    }).fitBounds(PALESTINE_BOUNDS);

    // =========
    // 2. DRAW A STYLIZED PALESTINE SHAPE
    // =========
    //
    // This is not a legal border drawing, it's a visual silhouette.
    // Goal: give a sense of the landmass without using the occupier's border logic.
    const palestineShapeCoords = [
      [33.3, 35.1],  // north coast-ish
      [33.4, 35.7],
      [32.9, 35.8],
      [32.4, 35.8],
      [31.9, 35.6],
      [31.4, 35.5],
      [30.9, 35.2],
      [30.3, 34.9],
      [29.9, 34.5],
      [30.6, 34.35],
      [31.2, 34.25],
      [31.8, 34.3],
      [32.3, 34.4],
      [32.8, 34.55],
      [33.1, 34.8],
    ];

    // Fill color: muted green; outline: subtle accent.
    // We keep fillOpacity low so markers and labels stand out.
    L.polygon(palestineShapeCoords, {
      color: '#e57373',       // softer red for outline
      weight: 2,
      fillColor: '#1b3a2a',   // deep green tone for the land
      fillOpacity: 0.35
    }).addTo(map);

    // =========
    // 3. ADD OUR OWN CITIES / EVENTS WITH OUR NAMES
    // =========

    // Later we can move this into a structured data array.
    function addEventMarker(lat, lng, title, htmlDescription) {
      const marker = L.circleMarker([lat, lng], {
        radius: 6,
        color: '#e53935',      // red outline
        weight: 2,
        fillColor: '#e53935',  // red fill
        fillOpacity: 0.9
      }).addTo(map);

      marker.bindPopup(`
        <strong>${title}</strong><br />
        ${htmlDescription}
      `);

      return marker;
    }

    // al-Quds / Jerusalem
    addEventMarker(
      31.778, 35.23,
      "al-Quds (Jerusalem)",
      `
        Central city of Palestine. Target of Judaization, settlement expansion,
        and attempts to erase its Arab and Islamic identity.
        Palestinians here face home demolitions, residency revocations, and daily repression.
      `
    );

    // Gaza
    addEventMarker(
      31.5, 34.47,
      "Gaza – besieged strip",
      `
        One of the most densely populated areas on earth, kept under land, sea, and air blockade.
        Repeated large-scale bombardments and massacres have tried to break its people,
        who continue to resist and insist on return.
      `
    );

    // Haifa
    addEventMarker(
      32.82, 34.99,
      "Haifa",
      `
        Palestinian coastal city on the Mediterranean.
        Large parts of its indigenous population were expelled in 1948,
        yet Palestinians who remained live as second-class under the occupation's regime.
      `
    );

    // Yafa / Jaffa
    addEventMarker(
      32.05, 34.75,
      "Yafa (Jaffa)",
      `
        Once called the "Bride of the Sea", a major Palestinian port city.
        Its people were largely expelled during the Nakba; its neighborhoods were
        absorbed into the occupier's coastal metropolis.
      `
    );

    // Deir Yassin
    addEventMarker(
      31.778, 35.177,
      "Deir Yassin – 1948 massacre",
      `
        In April 1948, Zionist militias attacked this Palestinian village near al-Quds,
        killing and terrorizing civilians as part of the ethnic cleansing campaign of the Nakba.
      `
    );

    // Jenin camp
    addEventMarker(
      32.463, 35.293,
      "Jenin refugee camp",
      `
        Refugee camp in the northern West Bank, repeatedly attacked with raids, demolitions,
        and killings by occupation forces, especially during the Second Intifada and recent assaults.
      `
    );

    // You can keep adding more markers like:
    // addEventMarker(lat, lng, "Title", "HTML description...");
    //
    // Later:
    //  - we put these into an array like quizData
    //  - each with { lat, lng, title, text, year, type }
    //  - and build filters (e.g. show only Nakba 1948 events, or only Gaza wars, etc.)
  </script>

</body>
</html>
